/*
 * V4V Payment Page Styles
 * Theme-agnostic CSS for Bitcoin Lightning payment pages
 *
 * INSTALLATION:
 * 1. Copy this file to your Hugo site's assets/css/v4v.css
 * 2. Import in your main stylesheet: @import 'v4v.css';
 *    Or include directly in your base template
 *
 * CUSTOMIZATION:
 * Override these CSS custom properties in your theme to match your design:
 *
 * :root {
 *   --v4v-accent: #your-brand-color;
 *   --v4v-text-primary: #your-text-color;
 *   // ... see variables below
 * }
 *
 * The default values use system colors and will look reasonable on most sites.
 */

/* ==========================================================================
   V4V Custom Properties (Design Tokens)
   Override these in your theme to customize appearance
   ========================================================================== */

:root {
  /* Colors - Override these to match your theme */
  --v4v-accent: #d63900;                    /* Primary action color */
  --v4v-accent-hover: #bf3300;              /* Hover state for accent */
  --v4v-text-primary: #1a1a1a;              /* Main text color */
  --v4v-text-secondary: #444;               /* Secondary/muted text */
  --v4v-text-meta: #666;                    /* Metadata, hints */
  --v4v-background: #fff;                   /* Page background */
  --v4v-background-card: #f5f5f5;           /* Card/panel background */
  --v4v-border-color: #d5d5d5;              /* Borders */

  /* Typography - Uses system fonts by default */
  --v4v-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --v4v-font-size-base: 1rem;               /* 16px */
  --v4v-font-size-sm: 0.875rem;             /* 14px */
  --v4v-font-size-lg: 1.125rem;             /* 18px */
  --v4v-font-size-xl: 1.333rem;             /* ~21px */
  --v4v-font-size-2xl: 1.777rem;            /* ~28px */
  --v4v-line-height: 1.5;

  /* Spacing (8px base grid) */
  --v4v-space-xs: 0.5rem;                   /* 8px */
  --v4v-space-sm: 0.75rem;                  /* 12px */
  --v4v-space-md: 1rem;                     /* 16px */
  --v4v-space-lg: 1.5rem;                   /* 24px */
  --v4v-space-xl: 2rem;                     /* 32px */

  /* Layout */
  --v4v-max-width: 700px;
  --v4v-qr-size: 250px;

  /* Interactive elements */
  --v4v-border-radius: 4px;
  --v4v-border-width: 1px;
  --v4v-border-width-emphasis: 2px;
  --v4v-transition: 0.3s ease;

  /* Shadows */
  --v4v-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

/* Dark mode support - auto-detects system preference */
@media (prefers-color-scheme: dark) {
  :root {
    --v4v-accent: #FF5733;
    --v4v-accent-hover: #FF6B47;
    --v4v-text-primary: #f5f5f4;
    --v4v-text-secondary: #c8c8c8;
    --v4v-text-meta: #a8a8a8;
    --v4v-background: #1a1a1a;
    --v4v-background-card: #262626;
    --v4v-border-color: #505050;
    --v4v-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
  }
}

/* ==========================================================================
   V4V Page Layout
   ========================================================================== */

.v4v-page {
  max-width: var(--v4v-max-width);
  margin: 0 auto;
  font-family: var(--v4v-font-family);
  color: var(--v4v-text-primary);
  line-height: var(--v4v-line-height);
}

.v4v-content {
  margin-top: var(--v4v-space-md);
}

.v4v-intro {
  font-size: var(--v4v-font-size-lg);
  color: var(--v4v-text-secondary);
  margin-bottom: var(--v4v-space-xl);
}

#share-essay {
  color: var(--v4v-accent);
  text-decoration: none;
  cursor: pointer;
}

#share-essay:hover {
  text-decoration: underline;
}

/* ==========================================================================
   Amount Selection
   ========================================================================== */

.amount-selection {
  margin-bottom: var(--v4v-space-xl);
}

.amount-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--v4v-space-md);
  margin-bottom: var(--v4v-space-md);
}

.amount-btn {
  padding: var(--v4v-space-lg);
  background: transparent;
  border: var(--v4v-border-width-emphasis) solid var(--v4v-border-color);
  border-radius: var(--v4v-border-radius);
  cursor: pointer;
  font-family: var(--v4v-font-family);
  font-size: var(--v4v-font-size-xl);
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  color: var(--v4v-text-primary);
  transition: all var(--v4v-transition);
}

.amount-btn:hover {
  border-color: var(--v4v-accent);
  color: var(--v4v-accent);
}

.amount-btn:active {
  transform: translateY(1px);
}

.amount-btn--suggested {
  border-color: var(--v4v-accent);
  color: var(--v4v-accent);
}

.amount-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.amount-btn:disabled:hover {
  border-color: var(--v4v-border-color);
  color: var(--v4v-text-primary);
}

.amount-btn--suggested:disabled {
  border-color: var(--v4v-accent);
  color: var(--v4v-accent);
}

/* ==========================================================================
   Custom Amount Input
   ========================================================================== */

.custom-amount-label {
  display: block;
  font-size: var(--v4v-font-size-sm);
  color: var(--v4v-text-meta);
  margin-bottom: var(--v4v-space-sm);
  font-weight: 400;
}

.custom-amount-field {
  display: flex;
  gap: var(--v4v-space-sm);
  align-items: stretch;
}

.custom-amount-input {
  padding: var(--v4v-space-xs) 0;
  border: none;
  border-bottom: var(--v4v-border-width) solid var(--v4v-border-color);
  border-radius: 0;
  font-family: var(--v4v-font-family);
  font-size: var(--v4v-font-size-base);
  background: var(--v4v-background);
  color: var(--v4v-text-primary);
  width: calc((100% - 3 * var(--v4v-space-sm)) / 4);
  text-align: right;
  transition: border-color var(--v4v-transition);
}

.custom-amount-input:focus {
  outline: none;
  border-bottom-color: var(--v4v-accent);
}

.custom-amount-input::placeholder {
  color: var(--v4v-text-meta);
  opacity: 0.5;
}

.custom-amount-input:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.custom-amount-btn {
  display: inline-block;
  background: transparent;
  border: var(--v4v-border-width) solid var(--v4v-text-meta);
  border-radius: var(--v4v-border-radius);
  cursor: pointer;
  font-family: var(--v4v-font-family);
  font-size: var(--v4v-font-size-sm);
  font-weight: 500;
  padding: var(--v4v-space-xs) var(--v4v-space-md);
  color: var(--v4v-text-meta);
  transition: all var(--v4v-transition);
  white-space: nowrap;
  flex-shrink: 0;
}

.custom-amount-btn:hover {
  color: var(--v4v-accent);
  border-color: var(--v4v-accent);
}

.custom-amount-btn:active {
  transform: translateY(1px);
}

.custom-amount-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.custom-amount-btn:disabled:hover {
  border-color: var(--v4v-text-meta);
  color: var(--v4v-text-meta);
}

.validation-error {
  color: var(--v4v-accent);
  font-size: var(--v4v-font-size-sm);
  margin-top: var(--v4v-space-sm);
  margin-bottom: 0;
}

/* ==========================================================================
   Error Display
   ========================================================================== */

.error-display {
  text-align: center;
  padding: var(--v4v-space-xl);
  background: var(--v4v-background-card);
  border-radius: var(--v4v-border-radius);
  margin-bottom: var(--v4v-space-xl);
  animation: v4v-fadeIn var(--v4v-transition) ease-out;
}

.error-display .error-message {
  color: var(--v4v-accent);
  font-size: var(--v4v-font-size-base);
  margin-bottom: var(--v4v-space-lg);
}

.error-dismiss-btn {
  display: inline-block;
  background: transparent;
  border: var(--v4v-border-width) solid var(--v4v-text-meta);
  border-radius: var(--v4v-border-radius);
  cursor: pointer;
  font-family: var(--v4v-font-family);
  font-size: var(--v4v-font-size-sm);
  font-weight: 500;
  padding: var(--v4v-space-xs) var(--v4v-space-md);
  color: var(--v4v-text-meta);
  transition: all var(--v4v-transition);
}

.error-dismiss-btn:hover {
  color: var(--v4v-accent);
  border-color: var(--v4v-accent);
}

/* ==========================================================================
   QR Display
   ========================================================================== */

.qr-display {
  text-align: center;
  padding: var(--v4v-space-xl);
  background: var(--v4v-background-card);
  border-radius: var(--v4v-border-radius);
  margin-bottom: var(--v4v-space-xl);
  transition: background-color var(--v4v-transition);
  animation: v4v-fadeIn var(--v4v-transition) ease-out;
}

@keyframes v4v-fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.qr-code {
  min-height: var(--v4v-qr-size);
  display: flex;
  align-items: center;
  justify-content: center;
}

.qr-code:has(canvas) {
  margin-top: var(--v4v-space-sm);
  margin-bottom: var(--v4v-space-lg);
}

.qr-loading {
  color: var(--v4v-text-meta);
  font-size: var(--v4v-font-size-base);
  margin: 0;
  text-decoration: none;
}

.qr-loading.polling {
  animation: v4v-pulse 2s ease-in-out infinite;
}

@keyframes v4v-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.polling-status {
  font-size: var(--v4v-font-size-sm);
  color: var(--v4v-text-meta);
  margin-bottom: var(--v4v-space-md);
  animation: v4v-pulse 2s ease-in-out infinite;
}

.qr-code canvas {
  display: block;
  margin: 0 auto;
  box-shadow: var(--v4v-shadow);
  transition: box-shadow var(--v4v-transition);
}

a.qr-link,
a.qr-link:hover {
  display: block;
  cursor: pointer;
  text-decoration: none;
}

.qr-link:hover .qr-code canvas {
  box-shadow: 0 0 0 3px var(--v4v-accent);
}

.qr-hint {
  font-size: var(--v4v-font-size-sm);
  color: var(--v4v-text-meta);
  margin-bottom: var(--v4v-space-md);
}

.qr-hint--mobile {
  display: inline;
}

.qr-hint--desktop {
  display: none;
}

@media (min-width: 768px) {
  .qr-hint--mobile {
    display: none;
  }
  .qr-hint--desktop {
    display: inline;
  }
}

.qr-amount {
  font-size: var(--v4v-font-size-2xl);
  font-weight: 700;
  color: var(--v4v-text-primary);
  margin-bottom: var(--v4v-space-xs);
  letter-spacing: -0.02em;
}

.qr-amount-value {
  font-variant-numeric: tabular-nums;
}

.qr-copy-link {
  background: none;
  border: none;
  color: var(--v4v-text-meta);
  cursor: pointer;
  font-family: inherit;
  font-size: inherit;
  font-weight: 400;
  text-decoration: underline;
  padding: 0;
  transition: color var(--v4v-transition);
}

.qr-copy-link:hover {
  color: var(--v4v-accent);
}

.qr-cancel-btn {
  display: inline-block;
  background: transparent;
  border: var(--v4v-border-width) solid var(--v4v-text-meta);
  border-radius: var(--v4v-border-radius);
  cursor: pointer;
  font-family: var(--v4v-font-family);
  font-size: var(--v4v-font-size-sm);
  font-weight: 500;
  padding: var(--v4v-space-xs) var(--v4v-space-md);
  color: var(--v4v-text-meta);
  transition: all var(--v4v-transition);
}

.qr-cancel-btn:hover {
  color: var(--v4v-accent);
  border-color: var(--v4v-accent);
}

/* ==========================================================================
   Payment Confirmation
   ========================================================================== */

.payment-status {
  text-align: center;
  padding: var(--v4v-space-xl);
  background: var(--v4v-background-card);
  margin-bottom: var(--v4v-space-xl);
  border-radius: var(--v4v-border-radius);
  transition: background-color var(--v4v-transition);
}

.payment-check {
  font-size: var(--v4v-font-size-2xl);
  font-weight: 600;
  color: var(--v4v-accent);
  margin-bottom: var(--v4v-space-sm);
  letter-spacing: -0.02em;
}

.payment-thanks {
  color: var(--v4v-text-secondary);
  font-size: var(--v4v-font-size-base);
  margin-bottom: 0;
}

/* ==========================================================================
   Navigation
   ========================================================================== */

.v4v-nav {
  margin-top: var(--v4v-space-lg);
  margin-bottom: var(--v4v-space-lg);
}

.v4v-back-link {
  color: var(--v4v-text-secondary);
  text-decoration: none;
  font-size: var(--v4v-font-size-sm);
  transition: color var(--v4v-transition);
}

.v4v-back-link:hover {
  color: var(--v4v-accent);
}

/* ==========================================================================
   V4V Details/Info Section
   ========================================================================== */

.v4v-details {
  margin-top: var(--v4v-space-lg);
}

.v4v-details summary {
  cursor: pointer;
  font-size: var(--v4v-font-size-base);
  color: var(--v4v-text-meta);
  font-weight: 500;
  transition: color var(--v4v-transition);
  list-style-position: outside;
  list-style: none;
}

.v4v-details summary::marker {
  display: none;
}

.v4v-details summary:hover {
  color: var(--v4v-accent);
}

.v4v-details p {
  margin-top: var(--v4v-space-md);
  font-size: var(--v4v-font-size-base);
  color: var(--v4v-text-secondary);
  line-height: var(--v4v-line-height);
}

.v4v-learn-link {
  display: inline-block;
  margin-top: var(--v4v-space-sm);
  color: var(--v4v-accent);
  text-decoration: none;
  font-size: var(--v4v-font-size-sm);
  transition: color var(--v4v-transition);
}

.v4v-learn-link:hover {
  text-decoration: underline;
}

/* ==========================================================================
   Mobile Adjustments
   ========================================================================== */

@media (max-width: 600px) {
  .custom-amount-input {
    max-width: none;
  }

  .qr-display,
  .payment-status {
    padding: var(--v4v-space-lg);
  }

  /* !important required to override inline styles from QR library */
  .qr-code canvas {
    width: var(--v4v-qr-size) !important;
    height: var(--v4v-qr-size) !important;
  }
}

/* ==========================================================================
   Utility Classes
   ========================================================================== */

.v4v-hidden {
  display: none !important;
}

/* Support generic .hidden if your theme doesn't define it */
.v4v-page .hidden {
  display: none !important;
}
